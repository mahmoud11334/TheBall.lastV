<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Ball</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #606060, #808080);
            overflow: hidden;
            touch-action: manipulation;
        }

        #gameContainer {
            width: 100vw;
            height: 100vh;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .screen {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
        }

        .screen.active {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        #mainScreen {
            text-align: center;
            position: relative;
        }

        .title {
            font-size: clamp(3rem, 8vw, 6rem);
            font-weight: bold;
            color: white;
            text-shadow: 0 0 20px rgba(255,255,255,0.8);
            margin-bottom: 2rem;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 20px rgba(255,255,255,0.8); }
            to { text-shadow: 0 0 30px rgba(255,255,255,1); }
        }

        .button {
            background: linear-gradient(135deg, #ff4444, #cc0000);
            color: white;
            border: none;
            padding: 15px 30px;
            margin: 10px;
            border-radius: 25px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            min-width: 200px;
            font-family: 'Tajawal', sans-serif;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.4);
            background: linear-gradient(135deg, #ff6666, #dd1111);
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: linear-gradient(135deg, #f0f0f0, #d0d0d0);
            padding: 30px;
            border-radius: 20px;
            max-width: 90%;
            max-height: 80%;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-align: center;
        }

        .close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            font-weight: bold;
        }

        .close-btn:hover {
            color: #000;
        }

        #gameScreen {
            background: linear-gradient(135deg, #606060, #808080);
            flex-direction: column;
        }

        #gameCanvas {
            border: 2px solid #333;
            display: block;
            margin: 0 auto;
            background: linear-gradient(135deg, #606060, #808080);
        }

        .game-ui {
            position: absolute;
            top: 20px;
            left: 20px;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            display: flex;
            flex-direction: column;
        }

        #pauseButton {
            position: absolute;
            top: 20px;
            right: 20px;
            background: linear-gradient(135deg, #4444ff, #0000cc);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            font-family: 'Tajawal', sans-serif;
        }

        #pauseButton:hover {
            background: linear-gradient(135deg, #6666ff, #1111dd);
        }

        #countdown {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 4rem;
            color: white;
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            display: none;
            z-index: 999;
        }

        #motivationText {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5rem;
            color: white;
            text-shadow: 0 0 10px rgba(255,255,255,0.8);
            display: none;
            z-index: 500;
            pointer-events: none;
            font-family: 'Tajawal', sans-serif;
        }

        #endScreen {
            text-align: center;
            color: white;
        }

        .score-board {
            background: rgba(255,255,255,0.1);
            padding: 30px;
            border-radius: 20px;
            margin: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .code-input {
            margin: 20px 0;
        }

        .code-input input {
            padding: 10px;
            border-radius: 10px;
            border: none;
            font-size: 1rem;
            margin-left: 10px;
            width: 200px;
        }

        #version {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: white;
            font-size: 1rem;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.5);
        }

        @media (max-width: 768px) {
            .title {
                font-size: 2.5rem;
            }
            
            .button {
                font-size: 1rem;
                padding: 12px 24px;
                min-width: 150px;
            }

            .game-ui {
                font-size: 1.2rem;
            }

            #pauseButton {
                padding: 8px 16px;
                font-size: 0.9rem;
            }

            #motivationText {
                font-size: 1.2rem;
            }
        }
    </style>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div id="gameContainer">
        <div id="mainScreen" class="screen active">
            <h1 class="title">The Ball</h1>
            <button class="button" onclick="startGame()">ابدء</button>
            <div style="margin: 10px 0; color: white; font-size: 1rem;">ازاي العب؟</div>
            <button class="button" onclick="showInstructions()">أأأدخل شووووف</button>
            <button class="button" onclick="window.open('https://discord.gg/SYgjn82uWp', '_blank')">ديسكورد</button>
            <button class="button" onclick="showHighScores()">افضل نتائج</button>
            <div id="version">V5.1</div>
        </div>

        <div id="gameScreen" class="screen">
            <div class="game-ui">
                <div>Score: <span id="score">3</span></div>
                <div>Time: <span id="timer">0</span>s</div>
            </div>
            <button id="pauseButton" onclick="pauseGame()">توقف</button>
            <canvas id="gameCanvas"></canvas>
            <div id="countdown"></div>
            <div id="motivationText"></div>
        </div>

        <div id="endScreen" class="screen">
            <div class="score-board">
                <h2>انت خسرت يبطل</h2>
                <p>Final Score: <span id="finalScore">0</span></p>
                <p>Time Played: <span id="finalTime">0</span>s</p>
                <div class="code-input">
                    <label>Code: <input type="text" id="codeInput" placeholder="Enter code..."></label>
                </div>
                <button class="button" onclick="goHome()">Main Menu</button>
                <button class="button" onclick="restartGame()">Play Again</button>
            </div>
        </div>
    </div>

    <div id="instructionsModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeInstructions()">&times;</span>
            <h3>How to Play</h3>
            <p>طريقه اللعبه سهله جدا جدا جدا بكل بساطه انت كورة اي مربع تلاقي ابعد عنه عشان هياخد من الاسكور بتاعك و اي كورة تجيلك خدها هتزود الاسكور بتاعك بس و تخسر لو اسكورك بقا 0 بس كدا</p>
        </div>
    </div>

    <div id="highScoresModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="closeHighScores()">&times;</span>
            <h3>افضل نتائج</h3>
            <ul id="highScoresList"></ul>
        </div>
    </div>

    <div id="pauseModal" class="modal">
        <div class="modal-content">
            <span class="close-btn" onclick="resumeGame()">&times;</span>
            <h3>اللعبة متوقفة</h3>
            <button class="button" onclick="resumeGame()">استمر</button>
        </div>
    </div>

    <script>
        var currentScreen = 'main';
        var gameState = {
            score: 3,
            time: 0,
            gameRunning: false,
            player: { x: 0, y: 0, radius: 18 },
            enemies: [],
            powerups: [],
            gameSpeed: 1,
            originalColors: {
                background: 'linear-gradient(135deg, #606060, #808080)',
                player: 'white',
                playerShadow: 'white',
                enemy: '#ff4444',
                powerup: '#44ff44',
                powerupShadow: '#44ff44'
            },
            currentColors: {
                background: 'linear-gradient(135deg, #606060, #808080)',
                player: 'white',
                playerShadow: 'white',
                enemy: '#ff4444',
                powerup: '#44ff44',
                powerupShadow: '#44ff44'
            },
            originalDifficulty: {
                enemySpeedMultiplier: 1,
                powerupSpeedMultiplier: 1,
                spawnChance: 0.5
            },
            difficulty: {
                enemySpeedMultiplier: 1,
                powerupSpeedMultiplier: 1,
                spawnChance: 0.5
            },
            fixedDifficulty: false,
            lastMotivation: '',
            motivationTimer: null
        };

        var canvas, ctx;
        var gameTimer;
        var spawnTimer;
        var isHacked = false;
        var highScores = JSON.parse(localStorage.getItem('highScores')) || [];

        const motivations = [
            'عاش',
            'استمر',
            'جاامد',
            'انت الفاجر',
            'انت مفيش منك',
            'عاش الرجاله عااش',
            'انت مهكر اللعبه بقا',
            'مش ممكن',
            'انت المطروش'
        ];

        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId + 'Screen').classList.add('active');
            currentScreen = screenId;
            applyColorChanges();
        }

        function showInstructions() {
            document.getElementById('instructionsModal').style.display = 'flex';
        }

        function closeInstructions() {
            document.getElementById('instructionsModal').style.display = 'none';
        }

        function closeHighScores() {
            document.getElementById('highScoresModal').style.display = 'none';
            document.body.style.pointerEvents = 'auto';
        }

        function startGame() {
            showScreen('game');
            if (isHacked) {
                gameState.score = 3000;
                isHacked = false;
            }
            initGame();
            applyColorChanges();
        }

        function goHome() {
            showScreen('main');
            resetGame();
        }

        function restartGame() {
            resetGame();
            startGame();
        }

        function resetGame() {
            gameState.score = isHacked ? 3000 : 3;
            gameState.time = 0;
            gameState.gameRunning = false;
            gameState.player = { x: 0, y: 0, radius: 18 };
            gameState.enemies = [];
            gameState.powerups = [];
            gameState.gameSpeed = 1;
            gameState.fixedDifficulty = false;
            gameState.difficulty = { ...gameState.originalDifficulty };
            gameState.lastMotivation = '';
            clearInterval(gameTimer);
            clearInterval(spawnTimer);
            clearTimeout(gameState.motivationTimer);
            applyColorChanges();
        }

        function initGame() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            gameState.player.x = canvas.width / 2;
            gameState.player.y = canvas.height - 100;
            gameState.gameRunning = true;
            
            gameTimer = setInterval(() => {
                if (gameState.gameRunning) {
                    gameState.time++;
                    document.getElementById('timer').textContent = gameState.time;
                    if (gameState.time % 50 === 0) {
                        showMotivation();
                    }
                }
            }, 1000);

            spawnTimer = setInterval(spawnObjects, 500);
            
            setupControls();
            gameLoop();
        }

        function resizeCanvas() {
            const container = document.getElementById('gameContainer');
            const maxWidth = Math.min(400, window.innerWidth - 40);
            const maxHeight = Math.min(600, window.innerHeight - 100);
            
            canvas.width = maxWidth;
            canvas.height = maxHeight;
            
            if (gameState.player.x === 0) {
                gameState.player.x = canvas.width / 2;
                gameState.player.y = canvas.height - 100;
            }
            applyColorChanges();
        }

        function setupControls() {
            var isDragging = false;
            var touchStartX = 0;

            canvas.addEventListener('mousedown', (e) => {
                isDragging = true;
                updatePlayerPosition(e.clientX);
            });

            canvas.addEventListener('mousemove', (e) => {
                if (isDragging) {
                    updatePlayerPosition(e.clientX);
                }
            });

            canvas.addEventListener('mouseup', () => {
                isDragging = false;
            });

            canvas.addEventListener('touchstart', (e) => {
                e.preventDefault();
                isDragging = true;
                touchStartX = e.touches[0].clientX;
                updatePlayerPosition(e.touches[0].clientX);
            });

            canvas.addEventListener('touchmove', (e) => {
                e.preventDefault();
                if (isDragging) {
                    updatePlayerPosition(e.touches[0].clientX);
                }
            });

            canvas.addEventListener('touchend', (e) => {
                e.preventDefault();
                isDragging = false;
            });

            window.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowLeft' && gameState.player.x > gameState.player.radius) {
                    gameState.player.x -= 20;
                }
                if (e.key === 'ArrowRight' && gameState.player.x < canvas.width - gameState.player.radius) {
                    gameState.player.x += 20;
                }
            });
        }

        function updatePlayerPosition(clientX) {
            const rect = canvas.getBoundingClientRect();
            const x = clientX - rect.left;
            
            gameState.player.x = Math.max(gameState.player.radius, 
                Math.min(canvas.width - gameState.player.radius, x));
        }

        function spawnObjects() {
            if (!gameState.gameRunning) return;
            
            if (!gameState.fixedDifficulty) {
                const level = Math.min(Math.floor(gameState.time / 30), 3);
                gameState.difficulty.enemySpeedMultiplier = 1 + level * 0.5;
                gameState.difficulty.powerupSpeedMultiplier = 1 + level * 0.3;
                gameState.difficulty.spawnChance = Math.min(0.85, 0.5 + level * 0.1);
            }

            var spawnChance = gameState.difficulty.spawnChance;
            
            if (Math.random() < spawnChance) {
                var sizes = [12, 22, 32, 40];
                var selectedSize = sizes[Math.floor(Math.random() * sizes.length)];
                var baseSpeed = 2 + (gameState.time / 20);
                
                gameState.enemies.push({
                    x: Math.random() * (canvas.width - selectedSize) + selectedSize/2,
                    moveX: (Math.random() - 0.5) * 2,
                    y: -selectedSize/2,
                    size: selectedSize,
                    speed: (Math.random() * 3 + baseSpeed) * gameState.difficulty.enemySpeedMultiplier
                });
            }
            
            if (Math.random() < Math.max(0.2, 0.4 - (gameState.time / 200))) {
                gameState.powerups.push({
                    x: Math.random() * (canvas.width - 20) + 10,
                    y: -10,
                    radius: 10,
                    speed: (Math.random() * 2 + 1 + (gameState.time / 50)) * gameState.difficulty.powerupSpeedMultiplier,
                    glow: 0
                });
            }
            
            if (gameState.time > 0 && gameState.time % 15 === 0) {
                for(var i = 0; i < 3; i++) {
                    var size = 15 + Math.random() * 20;
                    setTimeout(function() {
                        if (gameState.gameRunning) {
                            gameState.enemies.push({
                                x: Math.random() * (canvas.width - size) + size/2,
                                moveX: (Math.random() - 0.5) * 2,
                                y: -size/2,
                                size: size,
                                speed: (4 + Math.random() * 4) * gameState.difficulty.enemySpeedMultiplier
                            });
                        }
                    }, i * 200);
                }
            }
        }

        function gameLoop() {
            if (!gameState.gameRunning) return;
            
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function update() {
            gameState.enemies.forEach((enemy, index) => {
                enemy.y += enemy.speed;
                enemy.x += enemy.moveX;
                
                if (enemy.y > canvas.height + 50) {
                    gameState.enemies.splice(index, 1);
                    return;
                }
                
                const dist = Math.sqrt(
                    Math.pow(gameState.player.x - enemy.x, 2) + 
                    Math.pow(gameState.player.y - enemy.y, 2)
                );
                
                if (dist < gameState.player.radius + enemy.size / 2) {
                    gameState.enemies.splice(index, 1);
                    gameState.score--;
                    document.getElementById('score').textContent = gameState.score;
                    
                    if (gameState.score <= 0) {
                        endGame();
                    }
                }
            });
            
            gameState.powerups.forEach((powerup, index) => {
                powerup.y += powerup.speed;
                powerup.glow += 0.1;
                
                if (powerup.y > canvas.height + 50) {
                    gameState.powerups.splice(index, 1);
                    return;
                }
                
                const dist = Math.sqrt(
                    Math.pow(gameState.player.x - powerup.x, 2) + 
                    Math.pow(gameState.player.y - powerup.y, 2)
                );
                
                if (dist < gameState.player.radius + powerup.radius) {
                    gameState.powerups.splice(index, 1);
                    gameState.score++;
                    document.getElementById('score').textContent = gameState.score;
                }
            });
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            canvas.style.background = gameState.currentColors.background;
            
            ctx.shadowBlur = 20;
            ctx.shadowColor = gameState.currentColors.playerShadow;
            ctx.fillStyle = gameState.currentColors.player;
            ctx.beginPath();
            ctx.arc(gameState.player.x, gameState.player.y, gameState.player.radius, 0, Math.PI * 2);
            ctx.fill();
            ctx.shadowBlur = 0;
            
            ctx.fillStyle = gameState.currentColors.enemy;
            gameState.enemies.forEach(enemy => {
                ctx.fillRect(enemy.x - enemy.size/2, enemy.y - enemy.size/2, enemy.size, enemy.size);
            });
            
            gameState.powerups.forEach(powerup => {
                ctx.shadowBlur = 10 + Math.sin(powerup.glow) * 5;
                ctx.shadowColor = gameState.currentColors.powerupShadow;
                ctx.fillStyle = gameState.currentColors.powerup;
                ctx.beginPath();
                ctx.arc(powerup.x, powerup.y, powerup.radius, 0, Math.PI * 2);
                ctx.fill();
                ctx.shadowBlur = 0;
            });
        }

        function endGame() {
            gameState.gameRunning = false;
            clearInterval(gameTimer);
            clearInterval(spawnTimer);
            clearTimeout(gameState.motivationTimer);
            
            document.getElementById('finalScore').textContent = gameState.score;
            document.getElementById('finalTime').textContent = gameState.time;
            
            saveHighScore(gameState.time);
            
            showScreen('end');
        }

        function saveHighScore(time) {
            highScores.push(time);
            highScores.sort((a, b) => b - a);
            highScores = highScores.slice(0, 5);
            localStorage.setItem('highScores', JSON.stringify(highScores));
        }

        function showHighScores() {
            const modal = document.getElementById('highScoresModal');
            const list = document.getElementById('highScoresList');
            list.innerHTML = '';
            highScores.forEach((score, index) => {
                const li = document.createElement('li');
                li.textContent = `المركز ${index + 1}: ${score} ث`;
                list.appendChild(li);
            });
            modal.style.display = 'flex';
            document.body.style.pointerEvents = 'none';
            modal.style.pointerEvents = 'auto';
        }

        function pauseGame() {
            gameState.gameRunning = false;
            document.getElementById('pauseModal').style.display = 'flex';
        }

        function resumeGame() {
            document.getElementById('pauseModal').style.display = 'none';
            startCountdown();
        }

        function startCountdown() {
            const countdownEl = document.getElementById('countdown');
            countdownEl.style.display = 'block';
            let count = 3;
            countdownEl.textContent = count;
            const interval = setInterval(() => {
                count--;
                if (count > 0) {
                    countdownEl.textContent = count;
                } else {
                    clearInterval(interval);
                    countdownEl.style.display = 'none';
                    gameState.gameRunning = true;
                    gameLoop();
                }
            }, 1000);
        }

        function showMotivation() {
            const motivationEl = document.getElementById('motivationText');
            let newMotivation = motivations[Math.floor(Math.random() * motivations.length)];
            while (newMotivation === gameState.lastMotivation) {
                newMotivation = motivations[Math.floor(Math.random() * motivations.length)];
            }
            gameState.lastMotivation = newMotivation;
            motivationEl.textContent = newMotivation;
            motivationEl.style.display = 'block';
            // Position relative to canvas
            const canvasRect = canvas.getBoundingClientRect();
            motivationEl.style.top = `${canvasRect.top + 10}px`;
            motivationEl.style.right = `${window.innerWidth - canvasRect.right + 10}px`;
            gameState.motivationTimer = setTimeout(() => {
                motivationEl.style.display = 'none';
            }, 3000);
        }

        document.getElementById('codeInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                const code = e.target.value;
                checkCode(code);
            }
        });

        function checkCode(code) {
            var message = '';
            var showDiscordButton = false;
            
            if (code === '12355') {
                message = 'عايز ايه؟';
            } else if (code === '44') {
                message = 'رقمي اهوو يجميييل 0155';
            } else if (code === '99') {
                message = 'تم تهكير جهازك';
            } else if (code === '199') {
                message = 'بترن علي الحكومه ليههh';
            } else if (code === 'dis') {
                message = '**دعوة :**<br>اهلا بك فـ ـي افضل سيرفر ماين كرافت البيدروك في الشرق الاوسط<br>(الســيرفر فـ ـي بدايــته)<br>اهــلا بلجميع<br><br>https://discord.gg/SYgjn82uWp';
                showDiscordButton = true;
            } else if (code === '994R') {
                showSpecialMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === '1588') {
                message = 'ايه يمستر ابراهيم عايز ايه';
            } else if (code === 'wig') {
                showWigMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'br') {
                showBrMessage();
                document.getElementById('codeInput'). enlue = '';
                return;
            } else if (code === 'mar') {
                showMarMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'bb') {
                showBbMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'ful') {
                showFulMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'foo') {
                showFooMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'so') {
                showSoMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'see') {
                showSeeMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'far') {
                showFarMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === '44r') {
                show44rMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === '542') {
                show542Message();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === '66') {
                show66Message();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === '105') {
                show105Message();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'yaso') {
                showYasoMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'y99') {
                showY99Message();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'meen') {
                showMeenMessage();
                document.getElementById('codeInput').value = '';
                return;
            } else if (code === 'dark') {
                gameState.currentColors = {
                    background: '#000000',
                    player: '#ffffff',
                    playerShadow: '#ffffff',
                    enemy: gameState.originalColors.enemy,
                    powerup: gameState.originalColors.powerup,
                    powerupShadow: gameState.originalColors.powerupShadow
                };
                applyColorChanges();
                message = 'Dark Mode ON';
            } else if (code === 'hak') {
                isHacked = true;
                message = 'الكود دا بيهكر اللعبه ممكن متقدرش تخسر تاني!!';
            } else if (code === 'sahl') {
                gameState.difficulty = {
                    enemySpeedMultiplier: 0.5,
                    powerupSpeedMultiplier: 0.7,
                    spawnChance: 0.3
                };
                gameState.fixedDifficulty = true;
                message = 'هذا اسهل مستوي';
            } else if (code === 'sa3b') {
                gameState.difficulty = {
                    enemySpeedMultiplier: 2,
                    powerupSpeedMultiplier: 1.5,
                    spawnChance: 0.9
                };
                gameState.fixedDifficulty = true;
                message = 'هذا اصعب مستوي';
            } else if (code === 'girl') {
                gameState.currentColors = {
                    background: 'linear-gradient(135deg, #ffc0cb, #800000)',
                    player: '#ff69b4',
                    playerShadow: '#ff69b4',
                    enemy: '#800000',
                    powerup: '#ffb6c1',
                    powerupShadow: '#ffb6c1'
                };
                applyColorChanges();
                message = 'you just Girl؟';
            } else if (code === 'oasta') {
                gameState.currentColors = { ...gameState.originalColors };
                gameState.difficulty = { ...gameState.originalDifficulty };
                gameState.fixedDifficulty = false;
                isHacked = false;
                applyColorChanges();
                message = 'تمام اووي كداا';
            } else {
                message = 'ايه هوا اي هبد معكش كود متجربش';
            }
            
            if (message) {
                showCodeModal(message, showDiscordButton);
                document.getElementById('codeInput').value = '';
            }
        }

        function applyColorChanges() {
            document.body.style.background = gameState.currentColors.background;
            document.getElementById('gameScreen').style.background = gameState.currentColors.background;
            if (canvas) {
                canvas.style.background = gameState.currentColors.background;
            }
        }

        function showSpecialMessage() {
            const specialModal = document.createElement('div');
            specialModal.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100vw;
                height: 100vh;
                background: linear-gradient(135deg, #000000 0%, #8b008b 25%, #000000 50%, #8b008b 75%, #000000 100%);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                animation: fadeIn 1s ease-in-out;
            `;
            
            const messageContent = document.createElement('div');
            messageContent.style.cssText = `
                text-align: center;
                padding: 50px;
                background: rgba(255, 255, 255, 0.1);
                border-radius: 30px;
                backdrop-filter: blur(20px);
                border: 2px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
                animation: slideUp 1s ease-out;
            `;
            
            messageContent.innerHTML = `
                <div style="font-size: clamp(2rem, 5vw, 4rem); font-weight: bold; margin-bottom: 20px; font-family: 'Arial Black', sans-serif;">
                    <span style="color: #8B0000;">Happy New</span> <span style="color: #000080;">Year</span>
                </div>
                <div style="font-size: clamp(1.5rem, 4vw, 3rem); font-weight: bold; margin-bottom: 30px; font-family: 'Arial Black', sans-serif;">
                    <span style="color: #8B0000;">كل سنة</span> <span style="color: #000080;">وانتي طيبه</span>
                </div>
                <div style="font-size: clamp(1rem, 3vw, 1.5rem); color: white; margin-top: 40px; font-family: 'Arial', sans-serif;">
                    هذه الرساله مخصوصه الي <span style="color: #8B0000; font-weight: bold; font-size: 1.3em; text-shadow: 0 0 10px #8B0000;">Raven</span>
                </div>
                <div style="font-size: clamp(2rem, 4vw, 3rem); color: #8B0000; font-weight: bold; margin-top: 20px; text-shadow: 0 0 15px #8B0000;">
                    21
                </div>
                <button onclick="this.parentElement.parentElement.remove()" style="
                    position: absolute;
                    top: 20px;
                    right: 30px;
                    background: none;
                    border: none;
                    color: white;
                    font-size: 30px;
                    cursor: pointer;
                    font-weight: bold;
                    text-shadow: 0 0 10px rgba(255,255,255,0.8);
                ">&times;</button>
            `;
            
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes slideUp {
                    from { transform: translateY(50px); opacity: 0; }
                    to { transform: translateY(0); opacity: 1; }
                }
            `;
            document.head.appendChild(style);
            
            specialModal.appendChild(messageContent);
            document.body.appendChild(specialModal);
            
            specialModal.addEventListener('click', function(e) {
                if (e.target === specialModal) {
                    specialModal.remove();
                }
            });
        }

        function showCodeModal(message, showDiscordButton = false) {
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'flex';
            
            const content = document.createElement('div');
            content.className = 'modal-content';
            content.innerHTML = `
                <span class="close-btn" onclick="this.parentElement.parentElement.remove()">&times;</span>
                <div style="margin: 20px 0; text-align: center; color: #333; line-height: 1.6;">
                    ${message}
                </div>
                ${showDiscordButton ? '<button class="button" onclick="window.open(\'https://discord.gg/SYgjn82uWp\', \'_blank\')" style="margin-top: 15px;">ادخل</button>' : ''}
            `;
            
            modal.appendChild(content);
            document.body.appendChild(modal);
            
            modal.addEventListener('click', function(e) {
                if (e.target === modal) {
                    modal.remove();
                }
            });
        }

        window.addEventListener('resize', () => {
            if (canvas) {
                resizeCanvas();
            }
        });
    </script>
</body>
</html>